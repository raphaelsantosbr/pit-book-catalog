<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${action == 'create' ? 'Novo Livro' : 'Editar Livro'}"></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
    <div class="container">
        <a class="navbar-brand" href="/books">Catálogo de Livros</a>
    </div>
</nav>

<div class="container">
    <h1 class="h3 mb-4" th:text="${action == 'create' ? 'Adicionar Livro' : 'Editar Livro'}"></h1>

    <form th:action="${action == 'create'} ? @{/books} : @{/books/{id}(id=${book.id})}"
          method="post" th:object="${book}">

        <div class="mb-3">
            <label class="form-label">Título *</label>
            <input type="text" th:field="*{title}" class="form-control" placeholder="Título do livro">
            <div th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="text-danger small"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">Autor *</label>
            <input type="text" th:field="*{author}" class="form-control" placeholder="Autor">
            <div th:if="${#fields.hasErrors('author')}" th:errors="*{author}" class="text-danger small"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">Gênero</label>
            <input type="text" th:field="*{genre}" class="form-control" placeholder="Ex: Romance, Ficção...">
            <div th:if="${#fields.hasErrors('genre')}" th:errors="*{genre}" class="text-danger small"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">Ano de Publicação *</label>
            <input type="number" th:field="*{publicationYear}" class="form-control" placeholder="Ano">
            <div th:if="${#fields.hasErrors('publicationYear')}" th:errors="*{publicationYear}" class="text-danger small"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">Sinopse</label>
            <textarea th:field="*{synopsis}" class="form-control" rows="4"
                      placeholder="Breve resumo do livro"></textarea>
            <div th:if="${#fields.hasErrors('synopsis')}" th:errors="*{synopsis}" class="text-danger small"></div>
        </div>

        <div class="d-flex justify-content-between">
            <a href="/books" class="btn btn-secondary">Voltar</a>
            <button type="submit" class="btn btn-primary"
                    th:text="${action == 'create' ? 'Salvar' : 'Atualizar'}"></button>
        </div>
    </form>
</div>

</body>
</html>
